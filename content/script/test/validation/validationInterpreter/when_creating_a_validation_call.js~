goog.require('goog.array');
goog.require('goog.string');
goog.require('src.site.validation.validationInterpreter');

goog.provide('src.test.validation.validationInterpreter.whenCreatingAValidtionCall');

/**
 @export
 */
src.test.validation.validationInterpreter.whenCreatingAValidtionCall.describe = function() {
    //Using
    var Current = src.site.validation.validationInterpreter;

    //Fields

    var Error_ = goog.string.getRandomString();
    var FakeMethodName_ = goog.string.getRandomString();
    var PropertyName_ = goog.string.getRandomString();

    var car_;
    var fakeMethod_;
    var find_;
    var innerRule_;
    var methods_;
    var peek_;
    var sink_;


    //Test Hooks
    beforeEach(function() {
        car_ = function() { };
        fakeMethod_ = function() { };
        find_ = function() { return fakeMethod_; };
        innerRule_ = [FakeMethodName_, 7, Error_];
        methods_ = [[FakeMethodName_, fakeMethod_]];
        peek_ = function() { return fakeMethod_; };
        sink_ = function() { return [7]; };
    });


    //Support Methods
    var callTheMethod_ = function() {
        return Current.createAValidationCall(PropertyName_, methods_, innerRule_, find_, car_, peek_, sink_);
    };


    //Test Methods

    it('should find the needed method.', function() {
        var methodWasCalled = false;

        find_ = function(methods, toRun) {
            methodWasCalled = goog.array.equals(methods, methods_) &&
                toRun(methods[0]) === true;

            return methods_[0];
        };

        callTheMethod_();

        expect(methodWasCalled).toBe(true);
    });
};



it('should find the method to use from the found pair.', function() {
    var methodWasCalled = false;

    callTheMethod_();

    expect(methodWasCalled).toBe(true);
});

describe('When  creating a validtion call, it', function() {
    src.test.validation.validationInterpreter.whenCreatingAValidtionCall.describe();
});

